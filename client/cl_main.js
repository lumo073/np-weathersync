(()=>{"use strict";const e={EXTRASUNNY:!0,CLEAR:!0,CLEARING:!0,OVERCAST:!0,SMOG:!0,FOGGY:!0,CLOUDS:!0,RAIN:!0,THUNDER:!0,SNOW:!1,BLIZZARD:!1,SNOWLIGHT:!1,XMAS:!1,HALLOWEEN:!1},t={EXTRASUNNY:[90,110],CLEAR:[80,95],CLEARING:[75,85],OVERCAST:[80,80],SMOG:[90,95],FOGGY:[80,90],CLOUDS:[80,90],RAIN:[75,90],THUNDER:[75,90],SNOW:[0,32],BLIZZARD:[-15,10],SNOWLIGHT:[0,32],XMAS:[-5,15],HALLOWEEN:[50,80]},r={0:{short:"N",long:"North"},1:{short:"NE",long:"Northeast"},2:{short:"E",long:"East"},3:{short:"SE",long:"Southeast"},4:{short:"S",long:"South"},5:{short:"SW",long:"Southwest"},6:{short:"W",long:"West"},7:{short:"NW",long:"Northwest"}},a=["XMAS","SNOW","BLIZZARD","SNOWLIGHT"],n=["THUNDER","RAIN","HALLOWEEN","CLEARING"];Object.keys(e).filter((t=>e[t]));let i=!1,s=0;setImmediate((()=>{emitNet("nns_weather:client:time:request")})),onNet("nns_weather:client:time",(e=>{i||(s=e)})),setInterval((()=>{i||(s++,s>=1440&&(s=0),o())}),5e3);const o=()=>{const e=Math.floor(s/60);NetworkOverrideClockTime(e,s%60,0)};let h;global.exports("FreezeTime",((e,t)=>{if(i=e,i&&t)return s=t,void o();i||emitNet("nns_weather:client:time:request")})),on("baseevents:enteredVehicle",((e,t)=>{h=-1===t?e:null})),on("baseevents:leftVehicle",(()=>{h=null}));let l=!1,c={weather:"EXTRASUNNY",windSpeed:0,windDir:0,rainLevel:0,temperature:0};setImmediate((()=>{emitNet("nns_weather:client:weather:request")}));const w=async(e,t=!1)=>{l&&!t||(emit("chat:addMessage",{template:'<div class="chat-message"><b>WEATHER REPORT</b><br> {0} at {1}Â°F <br>{2}mph {3} {4}</div>',args:[e.weather,e.temperature,(2.236936*e.windSpeed).toFixed(2),r[Math.round(e.windDir)].long,n.includes(c.weather)?`with Rain at ${Math.round(100*e.rainLevel)}%`:""]}),c.weather!==e.weather&&(SetWeatherTypeOvertimePersist(e.weather,30),await(3e4,new Promise((e=>{setTimeout((()=>{e()}),3e4)}))),c=e),ClearOverrideWeather(),ClearWeatherTypePersist(),SetWeatherTypePersist(c.weather),SetWeatherTypeNow(c.weather),SetWeatherTypeNowPersist(c.weather),SetForceVehicleTrails(a.includes(c.weather)),SetForcePedFootstepsTracks(a.includes(c.weather)),n.includes(c.weather)&&SetRainFxIntensity(e.rainLevel),SetWindSpeed(e.windSpeed),SetWindDirection(e.windDir))};onNet("nns_weather:client:weather",(async e=>{w(e)})),setInterval((()=>{(e=>{if(h&&n.includes(e.weather)){const e=GetVehicleDirtLevel(h);e>0&&SetVehicleDirtLevel(h,Math.max(0,e-1))}})(c),(e=>{if(h){const t=GetVehicleEngineTemperature(h);t<e.temperature&&SetVehicleEngineTemperature(h,t+(e.temperature-t)/100)}})(c)}),3e4),global.exports("FreezeWeather",((e,r)=>{var a;if(l=e,l&&r){const e=null!==(a=t[r])&&void 0!==a?a:[80,100];w({weather:r,windDir:0,windSpeed:0,rainLevel:-1,temperature:(n=e[0],i=e[1],n=Math.ceil(n),i=Math.floor(i),Math.floor(Math.random()*(i-n))+n)})}else{var n,i;l||emitNet("nns_weather:client:weather:request")}}));const S=GetCurrentResourceName();on("onClientResourceStart",(async e=>{e===S&&await async function(){await async function(){}(),await async function(){}()}()}))})();